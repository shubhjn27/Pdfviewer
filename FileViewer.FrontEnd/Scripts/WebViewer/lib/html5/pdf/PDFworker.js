function createPromiseCapability(){var c={};c.promise=new Promise(function(h,a){c.resolve=h;c.reject=a});return c}
(function(c){function h(e){this._status=a;this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(d){this._reject(d)}}if(c.Promise)"function"!==typeof c.Promise.all&&(c.Promise.all=function(a){var d=0,l=[],b,g,k=new c.Promise(function(k,a){b=k;g=a});a.forEach(function(k,a){d++;k.then(function(g){l[a]=g;d--;0===d&&b(l)},g)});0===d&&b(l);return k}),"function"!==typeof c.Promise.resolve&&(c.Promise.resolve=function(a){return new c.Promise(function(d){d(a)})}),"function"!==
typeof c.Promise.reject&&(c.Promise.reject=function(a){return new c.Promise(function(d,l){l(a)})}),"function"!==typeof c.Promise.prototype.catch&&(c.Promise.prototype.catch=function(a){return c.Promise.prototype.then(void 0,a)});else{var a=0,l=2,f={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(e){e._status!==a&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},
runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var d=this.handlers.shift(),f=d.thisPromise._status,b=d.thisPromise._value;try{1===f?"function"===typeof d.onResolve&&(b=d.onResolve(b)):"function"===typeof d.onReject&&(b=d.onReject(b),f=1,d.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(d.thisPromise))}catch(g){f=l,b=g}d.nextPromise._updateStatus(f,b);if(Date.now()>=a)break}0<this.handlers.length?setTimeout(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,
time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var d=0;d<this.unhandledRejections.length;d++)this.unhandledRejections[d].promise===a&&(this.unhandledRejections.splice(d),d--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var a=Date.now(),d=0;d<this.unhandledRejections.length;d++)if(500<a-this.unhandledRejections[d].time){var l=
this.unhandledRejections[d].promise._value,b="Unhandled rejection: "+l;l.stack&&(b+="\n"+l.stack);warn(b);this.unhandledRejections.splice(d);d--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};h.all=function(a){function d(k){g._status!==l&&(n=[],b(k))}var f,b,g=new h(function(g,k){f=g;b=k}),k=a.length,n=[];if(0===k)return f(n),g;for(var c=0,p=a.length;c<p;++c){var r=a[c],s=function(b){return function(a){g._status!==l&&(n[b]=a,k--,0===k&&f(n))}}(c);h.isPromise(r)?
r.then(s,d):s(r)}return g};h.isPromise=function(a){return a&&"function"===typeof a.then};h.resolve=function(a){return new h(function(d){d(a)})};h.reject=function(a){return new h(function(d,l){l(a)})};h.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,d){1!==this._status&&this._status!==l&&(1===a&&h.isPromise(d)?d.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,l)):(this._status=a,this._value=d,a===l&&0===this._handlers.length&&
(this._unhandledRejection=!0,f.addUnhandledRejection(this)),f.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(l,a)},then:function(a,d){var l=new h(function(b,g){this.resolve=b;this.reject=g});this._handlers.push({thisPromise:this,onResolve:a,onReject:d,nextPromise:l});f.scheduleHandlers(this);return l},catch:function(a){return this.then(void 0,a)}};c.Promise=h}})("undefined"===typeof window?this:window);var comObjToHandler={};
(function(c){c.MessageHandler=function(h,a){this.name=h;this.comObj=a;this.callbackIndex=1;this.postMessageTransfers=!0;var l=this.callbacksCapabilities={},f=this.actionHandler={},e=this.actionHandlerAsync={};this.nextAsync=null;var d=this,m=!1;f.console_log=[function(b){console.log(b)}];f.console_error=[function(b){c.utils.error(b)}];f.workerLoaded=[function(b){}];f.worker_restart=[function(b){var g=a,k=comObjToHandler[g];setTimeout(function(){g.removeEventListener("message",k);g.terminate();g=null},
5E3);d.newWorker=new Worker(b.location);d.tempWorker={redirectQueue:[],queue:[],postMessage:function(b,g){this.queue[this.queue.length]={msg:b,transfers:g}}};c.utils.log("I resize "+b.size);d.comObj=a=d.tempWorker;comObjToHandler[d.newWorker]=k;d.newWorker.addEventListener("message",k);g.onerror&&(d.newWorker.onerror=d.tempWorker.onerror=g.onerror);d.oldQueue=b.queue;b.queue=null;m||(d.on("InitWorker",function(b){d.comObj=a=d.newWorker;for(b=0;b<d.oldQueue.length;++b){var g=d.oldQueue[b];d.postMessage(g)}for(b=
0;b<d.tempWorker.redirectQueue.length;++b)g=d.tempWorker.redirectQueue[b],d.postMessage(g);for(b=0;b<d.tempWorker.queue.length;++b)g=d.tempWorker.queue[b],d.comObj.postMessage(g.msg,g.transfers);d.oldQueue=null;d.tempWorker=null;d.newWorker=null}),m=!0);d.newWorker.postMessage({action:"InitWorker",data:b})}];f.redirect_request=[function(b){a.redirectQueue?a.redirectQueue[a.redirectQueue.length]=b:(c.utils.log("Redirect Request needed to be posted."),d.postMessage(b))}];a in comObjToHandler&&a.removeEventListener("message",
comObjToHandler[a]);comObjToHandler[a]=function(b){var g=b.data,k=function(b){if(b.message||b.errorData){var k=b.errorData;b={type:b.type?b.type:"JavascriptError",message:b.message};if(k)for(var a in k)k.hasOwnProperty(a)&&(b[a]=k[a])}d.postMessage({isReply:!0,callbackId:g.callbackId,error:b})};if(g.isReply)if(b=g.callbackId,b in l){var a=l[b];delete l[b];"error"in g?a.reject(g.error):a.resolve(g.data)}else c.utils.warn("Cannot resolve callback "+b);else if(g.action in f){var h=f[g.action];g.callbackId?
Promise.resolve().then(function(){return h[0].call(h[1],g.data)}).then(function(b){d.postMessage({isReply:!0,callbackId:g.callbackId,data:b})},function(b){k(b)}):h[0].call(h[1],g.data)}else g.action in e?(h=e[g.action],b=createPromiseCapability(),g.callbackId?b.promise.then(function(b){d.postMessage({isReply:!0,callbackId:g.callbackId,data:b});d.nextAsync()},function(b){k(b);d.nextAsync()}):b.promise.then(function(b){d.nextAsync()},function(b){d.nextAsync()}),h[0].call(h[1],g,b)):c.utils.error("Unknown action from worker: "+
g.action)};a.addEventListener("message",comObjToHandler[a])};c.MessageHandler.prototype={on:function(h,a,l){var f=this.actionHandler;f[h]&&c.utils.error('There is already an actionName called "'+h+'"');f[h]=[a,l]},replace:function(c,a,l){this.actionHandler[c]=[a,l]},onAsync:function(h,a,l){var f=this.actionHandlerAsync;f[h]&&c.utils.error('There is already an actionName called "'+h+'"');f[h]=[a,l]},replaceAsync:function(c,a,l){var f=this.actionHandlerAsync,e=this.actionHandler;e[c]&&delete e[c];f[c]=
[a,l]},onNextAsync:function(c){this.nextAsync=c},send:function(c,a){this.postMessage({action:c,data:a})},getNextId:function(){return this.callbackIndex++},sendWithPromise:function(c,a,l){var f=this.getNextId();c={action:c,data:a,callbackId:f,priority:l};a=createPromiseCapability();this.callbacksCapabilities[f]=a;try{this.postMessage(c)}catch(e){a.reject(e)}return a.promise},sendWithPromiseReturnId:function(c,a,l){var f=this.getNextId();c={action:c,data:a,callbackId:f,priority:l};a=createPromiseCapability();
this.callbacksCapabilities[f]=a;try{this.postMessage(c)}catch(e){a.reject(e)}return{promise:a.promise,callbackId:f}},sendWithPromiseWithId:function(h,a,l,f){a>this.callbackIndex&&c.utils.error("Can't reuse callbackId "+a+" lesser than callbackIndex "+this.callbackIndex);a in this.callbacksCapabilities&&c.utils.error("Can't reuse callbackId "+a+". There is a capability waiting to be resolved. ");h={action:h,data:l,callbackId:a};l=createPromiseCapability();this.callbacksCapabilities[a]=l;try{this.postMessage(h)}catch(e){l.reject(e)}return l.promise},
getPromise:function(h){if(h in this.callbacksCapabilities)return this.callbacksCapabilities[h];c.utils.error("Cannot get promise for callback "+h)},cancelPromise:function(h){if(h in this.callbacksCapabilities){var a=this.callbacksCapabilities[h];delete this.callbacksCapabilities[h];a.reject({type:"Cancelled",message:"Request has been cancelled."});this.postMessage({action:"actionCancel",data:{callbackId:h}})}else c.utils.error("Cannot cancel callback "+h)},postMessage:function(c){if(this.postMessageTransfers){var a=
this.getTransfersArray(c);this.comObj.postMessage(c,a)}else this.comObj.postMessage(c)},getObjectTransfers:function(c,a){if("object"===typeof c)if(c instanceof Uint8Array)a.push(c.buffer);else if(c instanceof ArrayBuffer)a.push(c);else for(prop in c)c.hasOwnProperty(prop)&&this.getObjectTransfers(c[prop],a)},getTransfersArray:function(c){var a=[];this.getObjectTransfers(c,a);return 0==a.length?void 0:a}}})("undefined"===typeof window?this:window);(function(c){var h=c._trnDebugMode;"undefined"===typeof c.utils&&(c.utils={warn:function(a){h&&console.warn(a)},log:function(a){h&&console.log(a)},error:function(a){h&&console.error(a);throw Error(a);}});c.info=function(a){c.utils.log(a)};c.warn=function(a){c.utils.warn(a)};c.error=function(a){c.utils.error(a)}})("undefined"===typeof window?this:window);(function(c){c.Module={TOTAL_MEMORY:184549376,noExitRuntime:!0,devicePixelRatio:1,cur_doc:null,cache_ptr_size:0,has_buf_ownership:!0,loaded:!1,init_cb:null,cache_ptr:null,cleanupState:null,stopped:!1,docs:{},postEvent:function(c,a,l){Module.workerMessageHandler.send("event",{docId:c,type:a,data:l})},GetIndividualPageDimensions:function(c,a){var l=Module.GetPage(c,a),f=Module.PageGetPageWidth(l),e=Module.PageGetPageHeight(l),d=Module.PageGetDefaultMatrixAsArray(l),m=Module.PageGetRotation(l),l=Module.PageGetId(l);
return{width:f,height:e,matrix:d,rotation:m,id:l}},GetPageDimensionsRange:function(c,a,l){for(var f={};a<l;++a)f[a]=this.GetIndividualPageDimensions(c,a);return f},GetPageDimensions:function(c){var a=Module.GetPageCount(c);if(0===a)throw"This document has no pages.";return Module.GetPageDimensionsRange(c,1,a+1)},loadDoc:function(c,a,l){"undefined"===typeof Module&&this._main();var f=null;try{l=Module.CreateDoc(c,a,l);var e=Module.GetDoc(l);if(Module.PDFDocInitSecurityHandler(e))return{docId:l,pageDimensions:Module.GetPageDimensions(e)};
f={type:"NeedsPassword",errorData:{docId:l},message:"This document requires a password"}}catch(d){f={type:"InvalidPDF",message:d}}throw f;},loadCanvas:function(c,a,l,f,e,d,m,b){c=Module.GetDoc(c);return Module.RasterizePage(c,a+1,l,f,d,e,m,b)},loadResources:function(h,a){Module.Initialize(a);c.utils.log("PDFNet initialized!");Module.f0(!1);var l=new Uint8Array(h);Module.PDFNetSetResourceData(l)},_main:function(){enlargeMemory=function(){var c=new Uint8Array(new ArrayBuffer(Module.res_ptr_size)),a=
new Uint8Array(Module.HEAPU8.buffer,Module.res_ptr,Module.res_ptr_size);c.set(a);var l={},f;for(f in Module.docs){var e=Module.docs[f],d;e.buffer?d=e.buffer:e.bufPtr?(d=new Uint8Array(new ArrayBuffer(e.bufPtrSize)),a=new Uint8Array(Module.HEAPU8.buffer,e.bufPtr,e.bufPtrSize),d.set(a)):e.file&&(d=e.file);delete Module.docs[f];l[f]={source:d,extension:e.extension}}Module.workerRestartCallback(1.5*TOTAL_MEMORY,c.buffer,l);Module.HEAPU8=null};"undefined"===typeof Module&&(("undefined"!==typeof window?
window:self).Module={});(function(h){h.PDFDocExportXFDF=function(a,l){var c=Module.GetDoc(a),e=Module.Runtime.stackSave(),d;try{var m=l?Module.PDFDocFDFExtract(c,l):Module.PDFDocFDFExtract(c);d=Module.FDFDocSaveAsXFDF(m);Module.Runtime.stackRestore(e)}catch(b){throw Module.Runtime.stackRestore(e),b;}return d};h.PageArrayToPageSet=function(a){var c=Module.Runtime.stackSave(),f;try{f=Module.PageSetCreate();for(var e=0;e<a.length;++e)Module.PageSetAddPage(f,a[e]);Module.Runtime.stackRestore(c)}catch(d){throw Module.Runtime.stackRestore(c),
d;}return f};h.cancelCurrent=function(){var a=Module.cleanupState;return a?(clearTimeout(a.timeout),a.cleanupArr.forEach(function(a){a()}),Module.cleanupState=null,!0):!1};h.SetWorkerRestartCallback=function(a){Module.workerRestartCallback=a};h.XFDFMerge=function(a,c){if(c){for(var f=Module.PDFDocGetPageIterator(a,1);Module.IteratorHasNext(f);){var e=Module.IteratorCurrent(f);try{for(var d=Module.PageGetNumAnnots(e);0<d;){var m=Module.PageGetAnnot(e,--d);switch(Module.AnnotGetType(m)){case 1:case 16:case 17:case 18:case 19:break;
default:h.PageAnnotRemove(e,d)}}}catch(b){Module.ObjErase(e,"Annots")}Module.IteratorNext(f)}f=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f1(Module.GetUStringFromJSString(c),f));f=Module.getValue(f,"i8*");REX(Module.f2(a,f))}};h.MergeXFDF=function(a,c,f){var e=[];try{var d=Module.Runtime.stackSave();e[e.length]=function(){Module.Runtime.stackRestore(d)};var m=Module.GetDoc(a);Module.XFDFMerge(m,c);setTimeout(function(){e.forEach(function(b){b()});f.resolve({})},0)}catch(b){Module.stopped||
(e.forEach(function(b){b()}),f.reject(b))}};h.SaveHelper=function(a,c){Module.allocate(4,"i8",Module.ALLOC_STACK);Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(c);REX(Module.f3(a,Module.GetUStringFromJSString(c),2,0));return Module.docs[c].buffer.buffer};h.SaveDoc=function(a,c,f,e){var d=Module.GetDoc(a),m=[];try{var d=Module.GetDoc(a),b=Module.Runtime.stackSave();m[m.length]=function(){Module.Runtime.stackRestore(b)};Module.XFDFMerge(d,c);for(var g=Module.PDFDocGetPageIterator(d,1);Module.IteratorHasNext(g);){var k=
Module.IteratorCurrent(g);try{for(var n=Module.PageGetNumAnnots(k);0<n;){var h=Module.PageGetAnnot(k,--n);Module.AnnotHasAppearance(h)||Module.AnnotRefreshAppearance(h)}}catch(p){Module.ObjErase(k,"Annots")}Module.IteratorNext(g)}var r=Module.SaveHelper(d,a);setTimeout(function(){m.forEach(function(b){b()});if(f)e.resolve({fileData:r});else{var b=r.slice(0);e.resolve({fileData:b})}},0)}catch(s){Module.stopped||(m.forEach(function(b){b()}),e.reject(s))}};h.GetCurrentCanvasData=function(a){var c=Module.currentRenderData;
if(!c)return null;a&&REX(Module.f4(c.rast));a=new Uint8Array(new ArrayBuffer(c.buf_size));for(var f=0,e=0;e<c.out_height;++e)for(var d=c.bufPtr+c.stride*e,m=0;m<c.out_width;++m)a[f++]=Module.HEAPU8[d+2],a[f++]=Module.HEAPU8[d+1],a[f++]=Module.HEAPU8[d],a[f++]=Module.HEAPU8[d+3],d+=4;return{pageBuf:a.buffer,pageWidth:c.out_width,pageHeight:c.out_height}};h.RasterizePage=function(a,l,f,e,d,m,b,g){Module.currentRenderData={};var k=Module.currentRenderData;k.out_width=parseInt(f);k.out_height=parseInt(e);
var n=[];n.push(function(){Module.currentRenderData=null});try{var h=Module.GetPage(a,l),p=Module.PageGetPageWidth(h),r=Module.PageGetPageHeight(h);k.stride=4*k.out_width;k.buf_size=k.out_width*k.out_height*4;k.rast=Module.PDFRasterizerCreate();n.push(function(){Module.f5(k.rast)});if(b){var s=Module.EMSCreateUpdatedLayersContext(a,b);0!=s&&(Module.f6(k.rast,s),n.push(function(){Module.f7(s)}))}var t=Module.Runtime.stackSave();n[n.length]=function(){Module.Runtime.stackRestore(t)};var q=Module.PageGetRotation(h);
a=1==m||3==m;var q=(1==q||3==q)!=a,u,w=Module.allocate(48,"i8",Module.ALLOC_STACK);if(d){d.x1=d[0];d.y1=d[1];d.x2=d[2];d.y2=d[3];noRotateDefaultMtxPtr=Module.PageGetDefaultMatrix(h,0);invMtxPtr=Module.Matrix2DInverse(noRotateDefaultMtxPtr);d=Module.Matrix2DMultBBox(invMtxPtr,d);var v;d.x2<d.x1&&(v=d.x1,d.x1=d.x2,d.x2=v);d.y2<d.y1&&(v=d.y1,d.y1=d.y2,d.y2=v);u=k.out_width/(q?d.y2-d.y1:d.x2-d.x1);mtxPtr=Module.GetDefaultMatrixBox(h,d,m)}else mtxPtr=Module.PageGetDefaultMatrix(h,m),u=k.out_width/(a?r:
p);Module.Matrix2DSet(w,u,0,0,u,0,0);Module.Matrix2DConcat(w,mtxPtr);k.bufPtr=Module._malloc(k.buf_size);Module._memset(k.bufPtr,255,k.buf_size);n.push(function(){Module._free(k.bufPtr)});var y=Module.allocate(4,"i8",Module.ALLOC_STACK),x=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f8(k.rast,0));REX(Module.f9(k.rast,h,k.bufPtr,k.out_width,k.out_height,k.stride,4,!0,w,0,0,0,y));var z=Module.getValue(y,"i8*");n.push(function(){REX(Module.f10(z))});var A=(new Date).getTime(),B=function(){try{for(var b=
0,k=(new Date).getTime(),a=!1;200>b;){REX(Module.f11(z,x));if(!Module.getValue(x,"i8*")){a=!0;break}b=(new Date).getTime()-k}if(a){var d=Module.GetCurrentCanvasData(!1);c.utils.log("Total Page Time "+((new Date).getTime()-A));Module.stopped||(n.forEach(function(b){b()}),g.resolve(d))}else Module.cleanupState.timeout=setTimeout(B,0)}catch(l){Module.stopped||(n.forEach(function(b){b()}),g.reject(l))}},C=setTimeout(B,0);Module.cleanupState={cleanupArr:n,timeout:C};n.push(function(){Module.cleanupState=
null})}catch(E){Module.stopped||(n.forEach(function(b){b()}),g.reject(E))}};h.GetDestinationVPosHPos=function(a){var c=0,f=0,e=!1,d=!1,m=Module.DestinationGetPage(a),b=Module.DestinationGetExplicitDestObj(a),m=Module.PageGetDefaultMatrix(m),m=Module.Matrix2DInverse(m),g=Module.Matrix2DMult(m,{x:f,y:c}),f=g.x,c=g.y,k;try{switch(Module.DestinationGetFitType(a)){case 2:case 6:k=Module.ObjGetAt(b,2);Module.ObjIsNumber(k)&&(c=Module.ObjGetNumber(k),e=!0);break;case 0:k=Module.ObjGetAt(b,2);Module.ObjIsNumber(k)&&
(f=Module.ObjGetNumber(k),d=!0);k=Module.ObjGetAt(b,3);Module.ObjIsNumber(k)&&(c=Module.ObjGetNumber(k),e=!0);break;case 4:k=Module.ObjGetAt(b,2);Module.ObjIsNumber(k)&&(f=Module.ObjGetNumber(k),d=!0);k=Module.ObjGetAt(b,5);Module.ObjIsNumber(k)&&(c=Module.ObjGetNumber(k),e=!0);break;case 3:case 7:k=Module.ObjGetAt(b,2),Module.ObjIsNumber(k)&&(f=Module.ObjGetNumber(k),d=!0)}g=Module.Matrix2DMult(m,{x:f,y:c});f=g.x;c=g.y;e||(c=0);d||(f=0)}catch(n){f=c=0}return{hpos:f,vpos:c}};h.FillBookmarkTree=function(a,
c){for(var f=0;Module.BookmarkIsValid(a);a=Module.BookmarkGetNext(a),++f)try{var e=[];if(Module.BookmarkHasChildren(a)){var d=Module.BookmarkGetFirstChild(a);Module.FillBookmarkTree(d,e)}var m=Module.BookmarkGetTitle(a),e={children:e,name:m},b=Module.BookmarkGetAction(a),g=Module.ActionGetType(b);if(0==g){var k=Module.ActionGetDest(b);if(Module.DestinationIsValid(k)){var n=Module.DestinationGetPage(k);if(Module.PageIsValid(n)){var h=Module.PageGetIndex(n);if(0<h){e.pageNumber=h;var p=Module.GetDestinationVPosHPos(k);
e.verticalOffset=p.vpos;e.horizontalOffset=p.hpos}}}}else if(5==g){var r=Module.ObjFindObj(b,"URI");r&&(e.url=Module.ObjGetAsPDFText(r))}c[c.length]=e}catch(s){}};h.LoadBookmarks=function(a){a=Module.GetDoc(a);var c=[],f=Module.Runtime.stackSave();try{var e=Module.PDFDocGetFirstBookmark(a);Module.BookmarkIsValid(e)&&Module.FillBookmarkTree(e,c)}catch(d){}Module.Runtime.stackRestore(f);return{bookmarks:c}};h.UpdatePassword=function(a,c){var f=Module.GetDoc(a);return Module.PDFDocInitStdSecurityHandler(f,
c)?{success:!0,pageDimensions:Module.GetPageDimensions(f)}:{success:!1}};h.GetTextData=function(a,c,f){a=Module.GetDoc(a);var e=[];try{var d=Module.Runtime.stackSave();e[e.length]=function(){Module.Runtime.stackRestore(d)};var m=Module.GetPage(a,c),b=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f12(b));var g=Module.getValue(b,"i8*");e[e.length]=function(){f13(g)};REX(Module.f14(g,m,0,0));var k=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module.f15(m,!0,1,0,k));var n=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f16(g,k,0,n));var h=Module.getValue(n,"i8*"),p=Module._malloc(8*h);e[e.length]=function(){Module._free(p)};REX(Module.f16(g,k,p,n));var r=Module.GetJSDoubleArrFromCore(p,h),s=Module.allocate(4,"i8",Module.ALLOC_STACK),t=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f17(t));e[e.length]=function(){Module.f18(q)};var q=Module.getValue(t,"i8*");REX(Module.f19(g,q,0,s));var u=Module.GetJSStringFromUString(q),w=Module.getValue(s,"i8*"),v=Module._malloc(4*w);e[e.length]=
function(){Module._free(v)};REX(Module.f19(g,q,v,s));var y=Module.GetJSIntArrayFromCore(v,w),x=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f20(g,k,0,x));var z=Module.getValue(x,"i8*"),A=Module._malloc(8*z);e[e.length]=function(){Module._free(A)};REX(Module.f20(g,k,A,x));var B=Module.GetJSDoubleArrFromCore(A,z);setTimeout(function(){e.forEach(function(b){b()});f.resolve({str:u,quads:r,offsets:y,struct:B})},0)}catch(C){Module.stopped||(e.forEach(function(b){b()}),f.reject(C))}};h.InsertBlankPages=
function(a,c,f,e,d){var m=[],b=Module.GetDoc(a);try{var g=Module.Runtime.stackSave();m[m.length]=function(){Module.Runtime.stackRestore(g)};for(var k=c.length-1;0<=k;--k){var n=Module.PDFDocGetPageIterator(b,c[k]),h=Module.PDFDocPageCreate(b,f,e);Module.PDFDocPageInsert(b,n,h)}var p={pageDimensions:Module.GetPageDimensions(b)};this.postEvent(a,"pagesUpdated",p);setTimeout(function(){Module.stopped||(m.forEach(function(b){b()}),d.resolve(p))},0)}catch(r){Module.stopped||(m.forEach(function(b){b()}),
d.reject(r))}};h.InsertPages=function(a,c,f,e,d,m){var b=[],g=Module.GetDoc(a);try{var k=Module.Runtime.stackSave();b[b.length]=function(){Module.Runtime.stackRestore(k)};var n;if(c instanceof ArrayBuffer){var h=Module.CreateDoc(new Uint8Array(c));n=Module.GetDoc(h);b[b.length]=function(){Module.DeleteDoc(h)}}else n=Module.GetDoc(c);var p=f.length,r=Module.PageSetCreate();for(c=0;c<p;++c)Module.PageSetAddPage(r,f[c]);Module.PDFDocInsertPages(g,e,n,r,d);var s=Module.GetPageDimensions(g),t=Module.PageSetCreateRange(e,
e+p);Module.PDFDocExportXFDF(a,t);var q={pageDimensions:s};this.postEvent(a,"pagesUpdated",q);setTimeout(function(){b.forEach(function(b){b()});m.resolve(q)},0)}catch(u){Module.stopped||(b.forEach(function(b){b()}),m.reject(u))}};h.MovePages=function(a,c,f,e){var d=[],m=Module.GetDoc(a);try{var b=Module.Runtime.stackSave();d[d.length]=function(){Module.Runtime.stackRestore(b)};for(var g=c.length,k=Module.PageSetCreate(),n=0;n<g;++n)Module.PageSetAddPage(k,c[n]);Module.PDFDocMovePages(m,f,k);var h=
{pageDimensions:Module.GetPageDimensions(m)};this.postEvent(a,"pagesUpdated",h);setTimeout(function(){Module.stopped||(d.forEach(function(b){b()}),e.resolve(h))},0)}catch(p){Module.stopped||(d.forEach(function(b){b()}),e.reject(p))}};h.RemovePages=function(a,c,f){var e=Module.GetDoc(a),d=[];try{var m=Module.Runtime.stackSave();d[d.length]=function(){Module.Runtime.stackRestore(m)};for(var b=c.length-1;0<=b;--b){var g=Module.PDFDocGetPageIterator(e,c[b]);Module.IteratorHasNext(g)&&Module.PDFDocPageRemove(e,
g)}var k={pageDimensions:Module.GetPageDimensions(e)};this.postEvent(a,"pagesUpdated",k);setTimeout(function(){d.forEach(function(b){b()});f.resolve(k)},0)}catch(n){Module.stopped||(d.forEach(function(b){b()}),f.reject(n))}};h.RotatePages=function(a,c,f,e){var d=Module.GetDoc(a),m=[];try{var b=Module.Runtime.stackSave();m[m.length]=function(){Module.Runtime.stackRestore(b)};var g=c.length,k=0,n=Module.PDFDocGetPageIterator(d,c[0]);m.push(function(){Module.f21(n)});for(var h=c[0];Module.IteratorHasNext(n)&&
k<c[g-1];++h){if(h===c[k]){var p=Module.IteratorCurrent(n),r=(Module.PageGetRotation(p)+f)%4;Module.PageSetRotation(p,r);k++}Module.IteratorNext(n)}var s={pageDimensions:Module.GetPageDimensions(d)};this.postEvent(a,"pagesUpdated",s);setTimeout(function(){m.forEach(function(b){b()});e.resolve(s)},0)}catch(t){Module.stopped||(m.forEach(function(b){b()}),e.reject(t))}};h.ExtractPages=function(a,c,f,e){var d=[];try{var m=Module.Runtime.stackSave();d[d.length]=function(){Module.Runtime.stackRestore(m)};
var b=function(b){Module.stopped||(d.forEach(function(b){b()}),e.reject(b))};Module.XFDFMerge(a,f);var g=Module.CreateEmptyDoc(),k=createPromiseCapability();d[d.length]=function(){Module.DeleteDoc(g)};k.promise.then(function(a){e.promise.then(function(b){d.forEach(function(b){b()});return b},b);Module.SaveDoc(g,void 0,!0,e)},b);Module.InsertPages(g,a,c,1,!0,k)}catch(n){b(n)}};h.CropPages=function(a,c,f,e,d,m,b){var g=Module.GetDoc(a),k=[];try{var n=Module.Runtime.stackSave();k[k.length]=function(){Module.Runtime.stackRestore(n)};
var h=c.length,p=0,r=Module.PDFDocGetPageIterator(g,c[0]);k.push(function(){Module.f21(r)});for(var s=c[0];Module.IteratorHasNext(r)&&p<c[h-1];++s){if(s===c[p]){var t=Module.IteratorCurrent(r),q=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f22(t,q));var u=Module.PageGetRotation(t);console.log(u);var w=Module.getValue(q,"double"),v=Module.getValue(q+8,"double"),y=Module.getValue(q+16,"double"),x=Module.getValue(q+24,"double");0===u%4?(Module.setValue(q,w+d,"double"),Module.setValue(q+8,v+
e,"double"),Module.setValue(q+16,y-m,"double"),Module.setValue(q+24,x-f,"double")):1===u%4?(Module.setValue(q,w+f,"double"),Module.setValue(q+8,v+d,"double"),Module.setValue(q+16,y-e,"double"),Module.setValue(q+24,x-m,"double")):2===u%4?(Module.setValue(q,w+m,"double"),Module.setValue(q+8,v+f,"double"),Module.setValue(q+16,y-d,"double"),Module.setValue(q+24,x-e,"double")):3===u%4&&(Module.setValue(q,w+e,"double"),Module.setValue(q+8,v+m,"double"),Module.setValue(q+16,y-f,"double"),Module.setValue(q+
24,x-d,"double"));Module.setValue(q+32,0,"double");REX(Module.f23(t,q));p++}Module.IteratorNext(r)}var z={pageDimensions:Module.GetPageDimensions(g)};this.postEvent(a,"pagesUpdated",z);setTimeout(function(){k.forEach(function(b){b()});b.resolve(z)},0)}catch(A){Module.stopped||(k.forEach(function(b){b()}),b.reject(A))}}})("undefined"===typeof self?this.Module:self.Module);this.loaded=!0;Module.init_cb&&Module.init_cb()}}})("undefined"===typeof self?this:self);"undefined"===typeof Module&&(("undefined"!==typeof window?window:self).Module={});var crawp=Module.crap;
(function(c){c.currentFileString="/current";var h=0,a=0,l={},f=function(b){this.file=b;this.position=0;this.length=b.size;this.reader=new FileReaderSync};f.prototype={read:function(b,g,a){a=this.position+a<=this.length?a:this.length-this.position;b=b.subarray(g,g+a);g=new Uint8Array(this.reader.readAsArrayBuffer(this.file.slice(this.position,this.position+a)));b.set(g);this.position+=a;return a},seek:function(b){this.position=b},close:function(){this.reader=this.file=null},getPos:function(){return this.position},
getTotalSize:function(){return this.length}};var e=function(b){this.data=b;this.position=0;this.length=this.data.length};e.prototype={read:function(b,g,a){a=this.position+a<=this.length?a:this.length-this.position;b=b.subarray(g,g+a);g=this.data.subarray(this.position,this.position+a);b.set(g);this.position+=a;return a},seek:function(b){this.position=b},close:function(){this.data=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var d=function(b){this.docId=
b;this.length=0;this.data=new Uint8Array(8192);this.position=0};d.prototype={seek:function(b){this.position=b},close:function(){var b=new Uint8Array(this.data.buffer.slice(0,this.length));Module.ChangeDocBackend(this.docId,{ptr:Module.GetDoc(this.docId),buffer:b});this.data=null},getPos:function(){return this.position},getTotalSize:function(){return this.length},write:function(b,g,a){for(var c=this.position+a,d=this.data.length;c>d;){var d=Math.max(d*(16777216<d?1.5:2),c),e=new Uint8Array(d);e.set(this.data.subarray(0,
this.length),0);this.data=e}b=b.subarray(g,g+a);this.data.set(b,this.position);this.length+=a;this.position+=a;return a}};var m={IsWrite:function(b){return 0!=b.flags},open:function(b){var g=b.path.slice(1);this.IsWrite(b)?b.provider=new d(g):b.provider=Module.docs[g].buffer?new e(Module.docs[g].buffer):new f(Module.docs[g].file)},close:function(b){b.provider.close()},read:function(b,g,a,c,d){return b.provider.read(g,a,c)},llseek:function(b,g,a){b=b.provider;1===a?g+=b.getPos():2===a&&(g=b.getTotalSize()+
g);if(0>g)throw new Module.FS.ErrnoError(Module.ERRNO_CODES.EINVAL);b.seek(g);return g},write:function(b,g,a,c,d){return b.provider.write(g,a,c)}};THROW=function(b){throw{type:"InvalidPDF",message:b};};REX=function(b){b&&THROW(GetErrToString(b))};GetErrMessage=function(b){return Module.Pointer_stringify(Module.f24(b))};GetErrFunction=function(b){return Module.Pointer_stringify(Module.f25(b))};GetErrLineNumber=function(b){return Module.Pointer_stringify(Module.f26(b))};GetErrFileName=function(b){return Module.Pointer_stringify(Module.f27(b))};
GetErrToString=function(b){return"Exception: \n\t Message: "+GetErrMessage(b)+"\n\t Filename: "+GetErrFileName(b)+"\n\t Function: "+GetErrFunction(b)+"\n\t Linenumber: "+GetErrLineNumber(b)};c.Initialize=function(b){var g=Module.Runtime.stackSave();b=b?Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK):0;REX(Module.f28(b));REX(Module.f29(2));Module.Runtime.stackRestore(g)};c.GetDoc=function(b){if(b in Module.docs)return Module.docs[b].ptr;throw{type:"InvalidDocReference",message:"Unable to access Document id="+
b+". The document appears to be invalid or was deleted."};};c.clearDocBackend=function(){null!==Module.cache_ptr?(Module.has_buf_ownership&&Module._free(Module.cache_ptr),Module.cache_ptr=null):Module.docs[c.currentFileString]&&delete Module.docs[c.currentFileString]};c.MakeDev=function(b){if(!l[b]){var g=FS.makedev(3,5);FS.registerDevice(g,m);FS.mkdev(b,511,g);l[b]=!0}};c.CreateDocFileBackend=function(b,g){Module.MakeDev(g);var a=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.docs[g]={file:b};
var c=Module.allocate(Module.intArrayFromString(g),"i8",Module.ALLOC_STACK);REX(Module.f30(c,a));a=Module.getValue(a,"i8*");Module.docs[g].ptr=a};c.InsertImageIntoDoc=function(b,g){var a=[];try{var c=Module.ElementBuilderCreate();a.push(function(){Module.ElementBuilderDestroy(c)});var d=Module.ElementWriterCreate();a.push(function(){Module.ElementWriterDestroy(d)});var e=Module.ImageGetImageWidth(g),f=Module.ImageGetImageHeight(g),l=e/f;1<l?(e=612,f=parseInt(e/l)):(f=792,e=parseInt(f*l));var m=Module.ElementBuilderCreateImage(c,
g,0,0,e,f),q=Module.PDFDocPageCreate(b,e,f);Module.ElementWriterBegin(d,q);Module.ElementWriterWritePlacedElement(d,m);Module.ElementWriterEnd(d);Module.PDFDocPagePushBack(b,q)}finally{a.forEach(function(b){b()})}};c.CreateDocBackend=function(b,g,a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);if(b){var d=g&&"pdf"!=g;if("string"==typeof b){var e={};e.lazyFile=FS.createLazyFile("/",a,b,!0,!1)}else{var f=(e=b instanceof ArrayBuffer)?"buffer":"file";if(e&&(b=new Uint8Array(b),10485760>b.length+h&&
!d)){h+=b.length;d=b.length;f=Module._malloc(b.length);Module.HEAPU8.set(b,f);REX(Module.f32(f,d,c));c=Module.getValue(c,"i8*");Module.docs[a]={ptr:c,bufPtr:f,bufPtrSize:d,ownership:!0};Module.docs[a].extension=g;return}Module.MakeDev(a);e={};e[f]=b}Module.docs[a]=e;d?(b=Module.GetUStringFromJSString(a),REX(Module.f31(c)),c=Module.getValue(c,"i8*"),b=Module.ImageCreateFromFile(c,b),Module.InsertImageIntoDoc(c,b)):(b=Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_STACK),REX(Module.f30(b,
c)),c=Module.getValue(c,"i8*"));Module.docs[a].extension=g;Module.docs[a].ptr=c}else REX(Module.f31(c)),c=Module.getValue(c,"i8*"),Module.docs[a]={ptr:c},Module.docs[a].extension=g};c.ChangeDocBackend=function(b,g){var a=Module.docs[b];a?(a.bufPtr&&a.ownership&&(Module._free(a.bufPtr),h-=a.bufPtrSize),delete Module.docs[b]):c.utils.warn("Trying to delete document "+b+" that does not exist.");Module.docs[b]=g};c.DeleteDoc=function(b){var g=Module.docs[b];g?(g.ptr&&Module.PDFDocDestroy(g.ptr),g.bufPtr&&
g.ownership&&(Module._free(g.bufPtr),h-=g.bufPtrSize),delete Module.docs[b]):c.utils.warn("Trying to delete document "+b+" that does not exist.")};c.CreateDoc=function(b,g,k){if(!k){do k=(++a).toString();while(k in Module.docs)}Module.has_buf_ownership=!0;c.CreateDocBackend(b,g,k);return k};c.CreateEmptyDoc=function(){var b=(++a).toString(),g=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f31(g));g=Module.getValue(g,"i8*");Module.docs[b]={ptr:g};return b};c.GetPageCount=function(b){var g=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f33(b,g));return Module.getValue(g,"i8*")};c.GetPage=function(b,g){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f34(b,g,a));a=Module.getValue(a,"i8*");Module.PageIsValid(a)||THROW("Trying to access page that doesn't exist at index "+g);return a};c.PageGetPageWidth=function(b){var g=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module.f35(b,1,g));return Module.getValue(g,"double")};c.PageGetPageHeight=function(b){var g=Module.allocate(8,"i8",Module.ALLOC_STACK);
REX(Module.f36(b,1,g));return Module.getValue(g,"double")};c.PageGetDefaultMatrix=function(b,g){var a=Module.allocate(48,"i8",Module.ALLOC_STACK);g||(g=0);REX(Module.f15(b,!0,1,g,a));return a};c.PageGetDefaultMatrixAsArray=function(b){var a=Module.Runtime.stackSave(),c=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module.f15(b,!0,1,0,c));b=[];for(var d=0;6>d;++d)b[d]=Module.getValue(c+8*d,"double");Module.Runtime.stackRestore(a);return b};c.GetUStringFromJSString=function(b){var a=Module.allocate(4,
"i8",Module.ALLOC_STACK);b=Module.intArrayFromString(b);var c=Module.allocate(b,"i8",Module.ALLOC_STACK);REX(Module.f37(c,b.length-1,5,a));return Module.getValue(a,"i8*")};c.GetJSStringFromUString=function(b){var a=Module.allocate(4,"i16*",Module.ALLOC_STACK);REX(Module.f39(b,a));return Module.UTF16ToString(Module.getValue(a,"i16*"))};c.GetJSStringFromCString=function(b){return Module.Pointer_stringify(b)};c.PDFNetSetResourceData=function(b){Module.res_ptr=Module._malloc(b.length);Module.HEAPU8.set(b,
Module.res_ptr);REX(Module.f40(Module.res_ptr,b.length));Module.res_ptr_size=b.length};c.PDFDrawSetDPI=function(b,a){REX(Module.f41(b,a))};c.PDFDocDestroy=function(b){REX(Module.f42(b))};c.PDFRasterizerCreate=function(){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f43(0,b));return Module.getValue(b,"i8*")};c.PageGetRotation=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f44(b,a));return Module.getValue(a,"i8*")};c.PageGetId=function(b){var a=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f45(b,a));a=Module.getValue(a,"i8*");b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f46(a,b));b=Module.getValue(b,"i32");var c=Module.allocate(2,"i8",Module.ALLOC_STACK);REX(Module.f47(a,c));c=Module.getValue(c,"i16");return b+"-"+c};c.PageSetRotation=function(b,a){REX(Module.f48(b,a))};c.GetDefaultMatrixBox=function(b,a,c){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f44(b,d));b=(Module.getValue(d,"i32")+c)%4;c=Module.allocate(48,"i8",Module.ALLOC_STACK);
switch(b){case 0:return REX(Module.f49(c,1,0,0,-1,-a.x1,a.y2)),c;case 1:return REX(Module.f49(c,0,1,1,0,-a.y1,-a.x1)),c;case 2:return REX(Module.f49(c,-1,0,0,1,a.x2,-a.y1)),c;case 3:return REX(Module.f49(c,0,-1,-1,0,a.y2,a.x2)),c}throw Error("Yikes, we don't support that rotation type");};c.Matrix2DMultBBox=function(b,a){var c=Module.allocate(8,"i8",Module.ALLOC_STACK),d=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(c,a.x1,"double");Module.setValue(d,a.y1,"double");REX(Module.f50(b,c,
d));a.x1=Module.getValue(c,"double");a.y1=Module.getValue(d,"double");Module.setValue(c,a.x2,"double");Module.setValue(d,a.y2,"double");REX(Module.f50(b,c,d));a.x2=Module.getValue(c,"double");a.y2=Module.getValue(d,"double");return a};c.Matrix2DMult=function(b,a){var c=Module.allocate(8,"i8",Module.ALLOC_STACK),d=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(c,a.x,"double");Module.setValue(d,a.y,"double");REX(Module.f50(b,c,d));a.x=Module.getValue(c,"double");a.y=Module.getValue(d,"double");
return a};c.Matrix2DConcat=function(b,a){var c=Module.getValue(a,"double"),d=Module.getValue(a+8,"double"),e=Module.getValue(a+16,"double"),f=Module.getValue(a+24,"double"),l=Module.getValue(a+32,"double"),m=Module.getValue(a+40,"double");REX(Module.f51(b,c,d,e,f,l,m))};c.Matrix2DSet=function(b,a,c,d,e,f,l){REX(Module.f49(b,a,c,d,e,f,l))};c.IteratorHasNext=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f52(b,a));return 0!=Module.getValue(a,"i8")};c.IteratorCurrent=function(b){var a=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f53(b,a));return Module.getValue(Module.getValue(a,"i8*"),"i8*")};c.IteratorNext=function(b){REX(Module.f54(b))};c.PageGetNumAnnots=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f55(b,a));return Module.getValue(a,"i32")};c.PageGetAnnot=function(b,a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f56(b,a,c));return Module.getValue(c,"i8*")};c.PageAnnotRemove=function(b,a){REX(Module.f57(b,a))};c.AnnotGetType=
function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f58(b,a));return Module.getValue(a,"i32")};c.AnnotHasAppearance=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f59(b,0,0,a));return 0!=Module.getValue(a,"i8*")};c.AnnotRefreshAppearance=function(b){REX(Module.f60(b))};c.ObjErase=function(b,a){var c=Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_STACK);REX(Module.f61(b,c))};c.GetJSDoubleArrFromCore=function(b,a){for(var c=Array(a),d=b,e=
0;e<a;++e)c[e]=Module.getValue(d,"double"),d+=8;return c};c.GetJSIntArrayFromCore=function(b,a){for(var c=Array(a),d=b,e=0;e<a;++e)c[e]=Module.getValue(d,"i32"),d+=4;return c};c.BookmarkIsValid=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f62(b,a));return 0!=Module.getValue(a,"i8")};c.BookmarkGetNext=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f63(b,a));return Module.getValue(a,"i8*")};c.BookmarkGetFirstChild=function(b){var a=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module.f64(b,a));return Module.getValue(a,"i8*")};c.BookmarkHasChildren=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f65(b,a));return 0!=Module.getValue(a,"i8")};c.BookmarkGetAction=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f66(b,a));return Module.getValue(a,"i8*")};c.BookmarkGetTitle=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f67(b,a));b=Module.getValue(a,"i8*");return Module.GetJSStringFromUString(b)};
c.ActionGetType=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f68(b,a));return Module.getValue(a,"i32")};c.ActionGetDest=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f69(b,a));return Module.getValue(a,"i8*")};c.DestinationIsValid=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f70(b,a));return 0!=Module.getValue(a,"i8")};c.DestinationGetPage=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f71(b,a));
return Module.getValue(a,"i8*")};c.PageIsValid=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f72(b,a));return 0!=Module.getValue(a,"i8")};c.PageGetIndex=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f73(b,a));return Module.getValue(a,"i32")};c.ObjGetAsPDFText=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f74(b,a));b=Module.getValue(a,"i8*");return Module.GetJSStringFromUString(b)};c.ObjFindObj=function(b,a){var c=Module.allocate(4,
"i8",Module.ALLOC_STACK),d=allocate(intArrayFromString(a),"i8",ALLOC_STACK).REX(Module.f75(b,d,c));return Module.getValue(c,"i8*")};c.PDFDocGetFirstBookmark=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f76(b,a));return Module.getValue(a,"i8*")};c.DestinationGetExplicitDestObj=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f77(b,a));return Module.getValue(a,"i8*")};c.DestinationGetFitType=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);
REX(Module.f78(b,a));return Module.getValue(a,"i32")};c.ObjIsNumber=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f79(b,a));return 0!=Module.getValue(a,"i8")};c.ObjGetNumber=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f80(b,a));return Module.getValue(a,"double")};c.ObjGetAt=function(b,a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f81(b,a,c));return Module.getValue(c,"i8*")};c.Matrix2DInverse=function(b){var a=Module.allocate(48,
"i8",Module.ALLOC_STACK);REX(Module.f82(b,a));return a};c.PDFDocInitSecurityHandler=function(b){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f83(b,0,a));return 0!=Module.getValue(a,"i8")};c.PDFDocInitStdSecurityHandler=function(b,a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK),d=Module.intArrayFromString(a),e=Module.allocate(d,"i8",Module.ALLOC_STACK);REX(Module.f84(b,e,d.length-1,c));return 0!=Module.getValue(c,"i8")};c.PDFDocFDFExtract=function(b,a){var c=Module.allocate(4,"i8",
Module.ALLOC_STACK);a?REX(Module.f85(b,a,2,c)):REX(Module.f86(b,2,c));return Module.getValue(c,"i8*")};c.PDFDocInsertPages=function(b,a,c,d,e){REX(Module.f87(b,a,c,d,e?1:0,0))};c.PDFDocMovePages=function(b,a,c){REX(Module.f88(b,a,b,c,0,0))};c.PDFDocGetPageIterator=function(b,a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f89(b,a,c));return Module.getValue(c,"i8*")};c.PDFDocPageRemove=function(b,a){REX(Module.f90(b,a))};c.PDFDocPageCreate=function(b,a,c){var d=Module.allocate(40,"i8",
Module.ALLOC_STACK);Module.setValue(d,0,"double");Module.setValue(d+8,0,"double");Module.setValue(d+16,a,"double");Module.setValue(d+24,c,"double");Module.setValue(d+32,0,"double");a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f91(b,d,a));return Module.getValue(a,"i8*")};c.PDFDocPageInsert=function(a,c,d){REX(Module.f92(a,c,d))};c.PageSetCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f93(a));return Module.getValue(a,"i8*")};c.PageSetCreateRange=function(a,
c){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f94(d,a,c));return Module.getValue(d,"i8*")};c.PageSetAddPage=function(a,c){REX(Module.f95(a,c))};c.FDFDocSaveAsXFDF=function(a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(f96(a,c));a=Module.getValue(c,"i8*");return Module.GetJSStringFromUString(a)};c.ElementBuilderCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f97(a));return Module.getValue(a,"i8*")};c.ElementBuilderDestroy=function(a){REX(Module.f98(a))};
c.ElementBuilderCreateImage=function(a,c,d,e,f,l){var m=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f99(a,c,d,e,f,l,m));return Module.getValue(m,"i8*")};c.ElementWriterCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f100(a));return Module.getValue(a,"i8*")};c.ElementWriterDestroy=function(a){REX(Module.f101(a))};c.ElementWriterBegin=function(a,c){REX(Module.f102(a,c,1))};c.ElementWriterWritePlacedElement=function(a,c){REX(Module.f103(a,c))};c.ElementWriterEnd=
function(a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f104(a,c))};c.ImageGetImageWidth=function(a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f105(a,c));return Module.getValue(c,"i32")};c.ImageGetImageHeight=function(a){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f106(a,c));return Module.getValue(c,"i32")};c.ImageCreateFromMemory2=function(a,c,d){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f107(a,c,d,0,e));return Module.getValue(e,
"i8*")};c.ImageCreateFromFile=function(a,c){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module.f108(a,c,0,d));return Module.getValue(d,"i8*")};c.PDFDocPagePushBack=function(a,c){REX(Module.f109(a,c))}})("undefined"===typeof self?this.Module:self.Module);!function(c){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=c();else if("function"==typeof define&&define.amd)define([],c);else{var h;"undefined"!=typeof window?h=window:"undefined"!=typeof global?h=global:"undefined"!=typeof self&&(h=self);h.PriorityQueue=c()}}(function(){return function h(a,l,f){function e(b,g){if(!l[b]){if(!a[b]){var k="function"==typeof require&&require;if(!g&&k)return k(b,!0);if(d)return d(b,!0);k=Error("Cannot find module '"+b+"'");throw k.code="MODULE_NOT_FOUND",
k;}k=l[b]={exports:{}};a[b][0].call(k.exports,function(d){var g=a[b][1][d];return e(g?g:d)},k,k.exports,h,a,l,f)}return l[b].exports}for(var d="function"==typeof require&&require,m=0;m<f.length;m++)e(f[m]);return e}({1:[function(h,a,l){var f={}.hasOwnProperty,e=function(a,e){function b(){this.constructor=a}for(var g in e)f.call(e,g)&&(a[g]=e[g]);b.prototype=e.prototype;a.prototype=new b;a.__super__=e.prototype;return a};l=h("./PriorityQueue/AbstractPriorityQueue");h=h("./PriorityQueue/ArrayStrategy");
l=function(a){function f(a){a||(a={});a.strategy||(a.strategy=BinaryHeapStrategy);a.comparator||(a.comparator=function(a,b){return(a||0)-(b||0)});f.__super__.constructor.call(this,a)}e(f,a);return f}(l);l.ArrayStrategy=h;a.exports=l},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3}],2:[function(h,a,l){a.exports=function(){function a(e){if(null==(null!=e?e.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=e?e.comparator:void 0))throw"Must pass options.comparator, a comparator";
this.priv=new e.strategy(e);this.length=0}a.prototype.queue=function(a){this.length++;this.priv.queue(a)};a.prototype.dequeue=function(a){if(!this.length)throw"Empty queue";this.length--;return this.priv.dequeue()};a.prototype.peek=function(a){if(!this.length)throw"Empty queue";return this.priv.peek()};a.prototype.remove=function(a){this.priv.remove(a)&&--this.length};a.prototype.find=function(a){return 0<=this.priv.find(a)};a.prototype.removeAllMatching=function(a){a=this.priv.removeAllMatching(a);
this.length-=a};return a}()},{}],3:[function(h,a,l){var f;f=function(a,d,f){var b,g,k;g=0;for(b=a.length;g<b;)k=g+b>>>1,0<=f(a[k],d)?g=k+1:b=k;return g};a.exports=function(){function a(d){var e;this.options=d;this.comparator=this.options.comparator;this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[];this.data.sort(this.comparator).reverse()}a.prototype.queue=function(a){var e;e=f(this.data,a,this.comparator);this.data.splice(e,0,a)};a.prototype.dequeue=function(){return this.data.pop()};
a.prototype.peek=function(){return this.data[this.data.length-1]};a.prototype.find=function(a){var e=f(this.data,a,this.comparator)-1;return 0<=e&&!this.comparator(this.data[e],a)?e:-1};a.prototype.remove=function(a){a=this.find(a);return 0<=a?(this.data.splice(a,1),!0):!1};a.prototype.removeAllMatching=function(a){for(var e=0,b=this.data.length-1;0<=b;--b)a(this.data[b])&&(this.data.splice(b,1),++e);return e};return a}()},{}]},{},[1])(1)});(function(c){c.SetupPDFNetFunctions=function(h){for(var a=function(b){if("object"===typeof b)if(b.buffer)b=b.buffer.slice(b.byteOffset,b.byteOffset+b.length);else for(prop in b)b.hasOwnProperty(prop)&&(b[prop]=a(b[prop]));return b},l=Module.f110(),f,e=Module.f111(l),d=function(b,c,d){b=Module.GetDoc(b.docId);(d=Module.EMSCallSharedFunction(l,d,b))?c.reject({type:"InvalidPDF",message:GetErrToString(d)}):(d=Module.EMSGetLastResponse(l),d=a(d),c.resolve(d))};f=Module.f112(e);)f=Module.GetJSStringFromCString(f),
c.queue.onAsync(f,d);Module.f113(e);if(Module.f114){var m={},e=function(a,b){h.on(a,b);m[a]=!0};Module.docPtrStringToIdMap={};var b=function(a){if(a in Module.docPtrStringToIdMap)return Module.docPtrStringToIdMap[a];throw Error("Couldn't find document "+a);};e("pdfDocCreateFromBuffer",function(a){a=Module.CreateDoc(a.buf);var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});e("PDFDoc.destroy",function(a){a=b(a.doc);Module.DeleteDoc(a)});e("PDFDoc.saveMemoryBuffer",function(a){a=
b(a.doc);return Module.SaveHelper(Module.GetDoc(a),a).slice(0)});e("pdfDocCreate",function(a){a=Module.CreateDoc(a.buf);var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});e("GetPDFDoc",function(a){a=a.docId;var b=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[b]=a;return b});for(var g=Module.f114(),e=Module.f111(g),d=function(b,c){var d=Module.EMSCallPDFNetFunction(g,b);d?c.reject({type:"InvalidPDF",message:GetErrToString(d)}):(d=Module.EMSGetLastResponse(g),
d=a(d),c.resolve(d))};f=Module.f112(e);)if(f=Module.GetJSStringFromCString(f),!m[f])h.onAsync(f,d);Module.f113(e)}}})("undefined"===typeof self?this:self);self.shouldResize||importScripts("PDFNetC.js");
(function(c){c.EmscriptenPDFManager=function(){return this};c.EmscriptenPDFManager.prototype={LoadRes:function(a,c){Module.loadResources(a,c)},OnInitialized:function(a){Module.loaded?a():(Module.init_cb=function(){a()},c.utils.log("PDFNet is not initialized yet!"))},NewDoc:function(a,c,f,e){try{f.resolve(Module.loadDoc(a,c,e))}catch(d){Module.stopped||f.reject(d)}},DeleteDocument:function(a){Module.DeleteDoc(a)},UpdatePassword:function(a,c){return Module.UpdatePassword(a,c)},GetCanvas:function(a,
c,f,e,d,h,b,g){Module.loadCanvas(a,c,f,e,d,h,b,g)},GetCanvasProgressive:function(){return Module.GetCurrentCanvasData(!0)},LoadBookmarks:function(a){return Module.LoadBookmarks(a)},LoadText:function(a,c,f){Module.GetTextData(a,c+1,f)},SaveDoc:function(a,c,f,e){Module.SaveDoc(a,c,f,e)},CancelCurrent:function(){return Module.cancelCurrent()},LoadAnnotations:function(a,c){var f;c?(f=Module.PageArrayToPageSet(c),f=Module.PDFDocExportXFDF(a,f)):f=Module.PDFDocExportXFDF(a);return f},SetWorkerRestartCallback:function(a){Module.SetWorkerRestartCallback(a)},
Initialize:function(a){Module.TOTAL_MEMORY=a;importScripts("PDFNetC.js")},MergeXFDF:function(a,c,f){return Module.MergeXFDF(a,c,f)},InsertPages:function(a,c,f,e,d,h){return Module.InsertPages(a,c,f,e,d,h)},MovePages:function(a,c,f,e){return Module.MovePages(a,c,f,e)},RemovePages:function(a,c,f){return Module.RemovePages(a,c,f)},RotatePages:function(a,c,f,e){return Module.RotatePages(a,c,f,e)},ExtractPages:function(a,c,f,e){return Module.ExtractPages(a,c,f,e)},CropPages:function(a,c,f,e,d,h,b){return Module.CropPages(a,
c,f,e,d,h,b)},Stop:function(){Module.stopped=!0},InsertBlankPages:function(a,c,f,e,d){Module.InsertBlankPages(a,c,f,e,d)}};var h={setup:function(a){function h(f,e){c.utils.log("Redirected "+f.callbackId);a.send("redirect_request",f)}a.replaceAsync("test",h);a.replaceAsync("NewDoc",h);a.replaceAsync("UpdatePassword",h);a.replaceAsync("LoadRes",h);a.replaceAsync("GetCanvas",h);a.replaceAsync("GetCanvasPartial",h);a.replaceAsync("LoadText",h);a.replaceAsync("SaveDoc",h);a.replaceAsync("LoadBookmarks",
h);a.replaceAsync("GetCanvasProgressive",h);a.replaceAsync("LoadAnnotations",h);a.replaceAsync("actionCancel",h)}};(function(a){function l(a){p=a;b.actionMap[a.action](a.data,a.asyncCallCapability,a)}function f(a,c){a.asyncCallCapability=c;p?b.queue(a):l(a)}function e(d){if(self.shouldResize)m.Initialize(d.size);else{if(!(d instanceof Uint8Array)){a.send("test",!1);return}var e=255===d[0];a.postMessageTransfers=e;if(!("response"in new XMLHttpRequest)){a.send("test",!1);return}}m.OnInitialized(function(){m.SetWorkerRestartCallback(function(c,
d,e){h.setup(a);var f=[],q;p&&(p.asyncCallCapability=void 0,f.push(p));for(var k=b.length,l=0;l<k;++l)q=b.dequeue(),q.asyncCallCapability=void 0,f.push(q);a.send("worker_restart",{size:c,queue:f,docData:e,resData:d,workerPath:g,location:g+"pdf/ResizableWorker.js"});m.Stop();p&&(m.CancelCurrent(),p=null);D();p=null});c.SetupPDFNetFunctions(a);if(self.shouldResize){m.LoadRes(d.resData);if(d.docData){var f=d.docData,k=[],l;for(l in f){var r=createPromiseCapability();k.push(r.promise);m.NewDoc(f[l].source,
f[l].extension,r,l)}Promise.all(k).then(function(){a.send("InitWorker",{})})}else a.send("InitWorker",{});g=d.workerPath}else n(),a.send("test",{supportTypedArray:!0,supportTransfers:e})})}function d(){if(!p||"BeginOperation"!=p.action)if(b.length){if(p.priority!=t){var a=b.dequeue();l(a)}}else p=null}var m=new c.EmscriptenPDFManager,b,g,k=!1;Module.workerMessageHandler=a;var n=function(){k||(a.send("workerLoaded",{}),k=!0)};m.OnInitialized(n);var D=function(){c.queue=b=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,
comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});b.actionMap={};b.onAsync=function(c,d){a.onAsync(c,f);b.actionMap[c]=d}};D();var p=null;a.on("test",e);a.on("InitWorker",e);var r=function(a){p&&a(p)&&(m.CancelCurrent(),p=null);b.removeAllMatching(a)},s=function(a){r(function(b){return b.data&&b.data.docId===a})};a.on("UpdatePassword",function(a){return m.UpdatePassword(a.docId,a.password)});a.on("LoadRes",function(a){g=a.workerPath;m.LoadRes(a.array,
a.l);return{}});a.onNextAsync(d);b.onAsync("NewDoc",function(a,b){m.NewDoc(a.value,a.extension,b)});b.onAsync("GetCanvas",function(a,b){m.GetCanvas(a.docId,a.pageIndex,a.width,a.height,a.rotation,null,a.layers,b)});b.onAsync("GetCanvasPartial",function(a,b){m.GetCanvas(a.docId,a.pageIndex,a.width,a.height,a.rotation,a.bbox,a.layers,b)});b.onAsync("LoadText",function(a,b){m.LoadText(a.docId,a.pageIndex,b)});b.onAsync("SaveDoc",function(a,b){m.SaveDoc(a.docId,a.xfdfString,a.finishedWithDocument,b)});
b.onAsync("MergeXFDF",function(a,b){m.MergeXFDF(a.docId,a.xfdf,b)});b.onAsync("InsertPages",function(a,b){m.InsertPages(a.docId,a.doc,a.pageArray,a.destPos,a.insertBookmarks,b)});b.onAsync("MovePages",function(a,b){m.MovePages(a.docId,a.pageArray,a.destPos,b)});b.onAsync("RemovePages",function(a,b){m.RemovePages(a.docId,a.pageArray,b)});b.onAsync("RotatePages",function(a,b){m.RotatePages(a.docId,a.pageArray,a.rotation,b)});b.onAsync("ExtractPages",function(a,b){m.ExtractPages(a.docId,a.pageArray,
a.xfdfString,b)});b.onAsync("CropPages",function(a,b){m.CropPages(a.docId,a.pageArray,a.topMargin,a.botMargin,a.leftMargin,a.rightMargin,b)});b.onAsync("InsertBlankPages",function(a,b){m.InsertBlankPages(a.docId,a.pageArray,a.width,a.height,b)});b.onAsync("BeginOperation",function(a,b){b.resolve()});var t=99999;a.on("FinishOperation",function(b){if("BeginOperation"==p.action)a.onNextAsync(d),m.CancelCurrent(),p=null;else throw{message:"Operation has not started."};});a.on("DeleteDocument",function(a){a=
a.docId;s(a);m.DeleteDocument(a)});a.on("LoadBookmarks",function(a){return m.LoadBookmarks(a.docId)});a.on("GetCanvasProgressive",function(a){var c;if(p&&p.callbackId===a.callbackId)c=m.GetCanvasProgressive();else if(b.find({priority:0,callbackId:a.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};if(!c)throw{type:"Unavailable",message:"Rendering is complete or was cancelled."};return c});a.on("LoadAnnotations",function(a){return{xfdfString:m.LoadAnnotations(a.docId,a.pages)}});
a.on("actionCancel",function(a){p&&p.callbackId===a.callbackId?m.CancelCurrent()&&setTimeout(function(){d()},0):b.remove({priority:0,callbackId:a.callbackId})})})(new MessageHandler("worker_processor",this))})("undefined"===typeof window?this:window);
